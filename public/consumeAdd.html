<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>录入消费信息</title>
	</head>
	<body>
		<h4 align="center">消费管理系统</h4>
		<hr>
		<form method="post" action="rec">
			<table border="1px" style="border-collapse:collapse" align="center">
				<tr>
					<td colspan="2" align="center" style="color:blue">请录入消费信息</td>
				</tr>
				<tr>
					<td align="right">商品名称:</td>
					<td>
						<input type="text" name="consumeName" id="in1">
						<span id="msg1" style="font-size:10px;color:red"></span>					
					</td>
				</tr>
				<tr>
					<td align="right" width="100px">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格:</td>
					<td width="280px">
						<input type="text" name="consumePrice" id="in2"> 
						<span id="msg2" style="font-size:10px;color:red">(单位:元)</span>
					</td>
				</tr>
				<tr>
					<td align="right">数&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;量:</td>
					<td>
						<input type="number" name="consumeCount" id="in3">
						<span id="msg3" style="font-size:10px;color:red"></span>
					</td>
				</tr>
				<tr>
					<td align="right">消费类型:</td>
					<td>
						<select name="consumeType" style="width:170px;" id="in4">
							<option value="1" selected>生活消费</option>
							<option value="2">百货消费</option>
							<option value="3">日常消费</option>
						</select>
						<span id="msg4"></span>
					</td>
				</tr>
				<tr>
					<td align="right">消费日期:</td>
					<td>
						<input type="date" name="consumeDate" style="width:165px;" id="in5">
						<span id="msg5" style="font-size:10px;color:red"></span>
					</td>
				</tr>
				<tr>
					<td align="right">备注信息:</td>
					<td>
						<textarea name="remark" id="in6" cols="22" rows="1" style="resize:none"></textarea>
					</td>
				</tr>
				<tr>
					<td colspan="2" align="center">
						<input type="button" value="录入" id="btn">
						&nbsp;&nbsp;
						<input type="reset" value="重填">
					</td>
				</tr>
			</table>
		</form>
		<script>
			
			//非空验证
			in1.onblur=function(){
				if(in1.value===""){
					msg1.innerHTML="商品名称不能为空!"
				}else{
					msg1.innerHTML=null
				}
			}
			in2.onblur=function(){
				if(in2.value===""){
					msg2.innerHTML="价格不能为空!"
				}else{
					msg2.innerHTML=null
				}
			}
			in3.onblur=function(){
				if(in3.value===""){
					msg3.innerHTML="数量不能为空!"
				}else{
					msg3.innerHTML=null
				}
			}
			in5.onblur=function(){
				if(in5.value===""){
					msg5.innerHTML="消费日期不能为空!"
				}else{
					msg5.innerHTML=null
				}
			}
			
			//提交验证 把表单的值传给接口,提交成功跳转到查询页面
			btn.onclick=function(){
				if(in1.length<0 || in2.length<0 || in3.length<0 || in4.length<0 || in5.length<0){
					alert("录入失败")
				}else{
					alert("录入成功")
				}
				var xhr=new XMLHttpRequest()
				xhr.open("POST","/v2/product/add")
				xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded;charset=UTF-8')
				xhr.onload=function(){
					console.log(xhr.responseText)
					window.location.href="http://127.0.0.1:3000/consumeInfo.html"
				}
				xhr.send()
			}		
		</script>
	</body>
</html>